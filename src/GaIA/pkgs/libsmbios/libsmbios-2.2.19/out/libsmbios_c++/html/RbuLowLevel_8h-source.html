<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libsmbios_c library: /san/data/shared/software/internal/UNItools/src/GaIA/pkgs/libsmbios/libsmbios-2.2.19/src/include/smbios/RbuLowLevel.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>/san/data/shared/software/internal/UNItools/src/GaIA/pkgs/libsmbios/libsmbios-2.2.19/src/include/smbios/RbuLowLevel.h</h1><a href="RbuLowLevel_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* -*- Mode: C; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
00002 <span class="comment"> * vim:expandtab:autoindent:tabstop=4:shiftwidth=4:filetype=c:cindent:textwidth=0:</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (C) 2005 Dell Inc.</span>
00005 <span class="comment"> *  by Michael Brown &lt;Michael_E_Brown@dell.com&gt;</span>
00006 <span class="comment"> * Licensed under the Open Software License version 2.1</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * Alternatively, you can redistribute it and/or modify</span>
00009 <span class="comment"> * it under the terms of the GNU General Public License as published</span>
00010 <span class="comment"> * by the Free Software Foundation; either version 2 of the License,</span>
00011 <span class="comment"> * or (at your option) any later version.</span>
00012 <span class="comment"></span>
00013 <span class="comment"> * This program is distributed in the hope that it will be useful, but</span>
00014 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00016 <span class="comment"> * See the GNU General Public License for more details.</span>
00017 <span class="comment"> */</span>
00018 
00019 <span class="preprocessor">#ifndef RBULOWLEVEL_H</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define RBULOWLEVEL_H</span>
00021 <span class="preprocessor"></span>
00022 <span class="comment">// compat header should always be first header if including system headers</span>
00023 <span class="preprocessor">#include "<a class="code" href="compat_8h.html">smbios/compat.h</a>"</span>
00024 
<a name="l00025"></a><a class="code" href="RbuLowLevel_8h.html#a0">00025</a> <span class="preprocessor">#   define RBU_SMBIOS_STRUCT (0xDE)</span>
<a name="l00026"></a><a class="code" href="RbuLowLevel_8h.html#a1">00026</a> <span class="preprocessor"></span><span class="preprocessor">#   define RBU_ACTIVATE (0x005c)</span>
<a name="l00027"></a><a class="code" href="RbuLowLevel_8h.html#a2">00027</a> <span class="preprocessor"></span><span class="preprocessor">#   define RBU_CANCEL   (0x005d)</span>
00028 <span class="preprocessor"></span>
00029 <span class="comment">// WARNING WARNING WARNING</span>
00030 <span class="comment">//</span>
00031 <span class="comment">// This file is not guaranteed to be API/ABI stable. Include it at your own risk.</span>
00032 <span class="comment">//</span>
00033 <span class="comment">// WARNING WARNING WARNING</span>
00034 
00035 <span class="keyword">namespace </span>rbu
00036 {
00037 <span class="preprocessor">#   if defined(_MSC_VER)</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#       pragma pack(push,1)</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#   endif</span>
00040 <span class="preprocessor"></span>
00041     <span class="comment">/* RBU packets are 4 KB-aligned and consist of a header and data. The packet header contains the necessary information for BIOS to find the packets in memory, and assemble them in proper order. */</span>
00042 
<a name="l00043"></a><a class="code" href="structrbu_1_1rbu__packet.html">00043</a>     <span class="keyword">struct  </span><a class="code" href="structrbu_1_1rbu__packet.html">rbu_packet</a>
00044     {
<a name="l00045"></a><a class="code" href="structrbu_1_1rbu__packet.html#o0">00045</a>         <a class="code" href="types_8h.html#a2">u32</a> <a class="code" href="structrbu_1_1rbu__packet.html#o0">pktId</a>;      <span class="comment">// must be '$RPK'</span>
<a name="l00046"></a><a class="code" href="structrbu_1_1rbu__packet.html#o1">00046</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__packet.html#o1">pktSize</a>;    <span class="comment">// size of packet in KB</span>
<a name="l00047"></a><a class="code" href="structrbu_1_1rbu__packet.html#o2">00047</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__packet.html#o2">reserved1</a>;  <span class="comment">//</span>
<a name="l00048"></a><a class="code" href="structrbu_1_1rbu__packet.html#o3">00048</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__packet.html#o3">hdrSize</a>;    <span class="comment">// size of packet header in paragraphs (16 byte chunks)</span>
<a name="l00049"></a><a class="code" href="structrbu_1_1rbu__packet.html#o4">00049</a>         <a class="code" href="types_8h.html#a1">u16</a>  <a class="code" href="structrbu_1_1rbu__packet.html#o4">reserved2</a>; <span class="comment">//</span>
<a name="l00050"></a><a class="code" href="structrbu_1_1rbu__packet.html#o5">00050</a>         <a class="code" href="types_8h.html#a2">u32</a> <a class="code" href="structrbu_1_1rbu__packet.html#o5">pktSetId</a>;   <span class="comment">// unique id for packet set, can be anything</span>
<a name="l00051"></a><a class="code" href="structrbu_1_1rbu__packet.html#o6">00051</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__packet.html#o6">pktNum</a>;     <span class="comment">// sequential pkt number (only thing that changes)</span>
<a name="l00052"></a><a class="code" href="structrbu_1_1rbu__packet.html#o7">00052</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__packet.html#o7">totPkts</a>;    <span class="comment">// total number of packets</span>
<a name="l00053"></a><a class="code" href="structrbu_1_1rbu__packet.html#o8">00053</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__packet.html#o8">pktVer</a>;     <span class="comment">// version == 1 for now</span>
<a name="l00054"></a><a class="code" href="structrbu_1_1rbu__packet.html#o9">00054</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__packet.html#o9">reserved</a>[9];
<a name="l00055"></a><a class="code" href="structrbu_1_1rbu__packet.html#o10">00055</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__packet.html#o10">pktChksum</a>;  <span class="comment">// sum all bytes in pkt must be zero</span>
<a name="l00056"></a><a class="code" href="structrbu_1_1rbu__packet.html#o11">00056</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__packet.html#o11">pktData</a>;  <span class="comment">// Start of packet data.</span>
00057     }
00058     <a class="code" href="gcc_8hpp.html#a5">LIBSMBIOS_PACKED_ATTR</a>;
00059 
00060 
00061     <span class="comment">/* RBU Packet Requirements</span>
00062 <span class="comment"></span>
00063 <span class="comment">    1.All values in the packet header except PktNum must be the same for all packets in a set with the following exception:</span>
00064 <span class="comment">            -- Packet 0 may have a different packet size (PktSize).</span>
00065 <span class="comment">            -- checksums</span>
00066 <span class="comment">    2.Packet 0 data does not contain RBU data. Packet 1 contains the first chunk of RBU data.</span>
00067 <span class="comment">    3.Packet data begins immediately after the header. Packet data size and offset can be calculated from PktSize and HdrSize.</span>
00068 <span class="comment">    4.Reserved fields are 0.</span>
00069 <span class="comment">    5.If multiple packets sets are written to memory, all packet sets must be identical.</span>
00070 <span class="comment">    6.All packets must start on 4 KB boundaries.</span>
00071 <span class="comment">    7.All packets must be placed in non-paged memory.</span>
00072 <span class="comment">    8.The maximum size of a packet is 64 MB.</span>
00073 <span class="comment">    9.The maximum size of a packet header is 4 KB.</span>
00074 <span class="comment">    10.The maximum number of packets is 64 KB - 1.</span>
00075 <span class="comment">    11.CPU INIT# must be immediately asserted (e.g. via OS shutdown/restart) after the RBU packet set is placed in memory.</span>
00076 <span class="comment">    12.PktChk is the value resulting in a zero sum of all packet words (header and data).</span>
00077 <span class="comment">    13.PktSetId uniquely identifies a packet set. BIOS aborts the packet search if all packets do not have the same PkSetId. Example identifiers: a 4-character ASCII ID string (e.g. “_A00”), a 4-byte hash value (e.g. CRC).</span>
00078 <span class="comment">        */</span>
00079 
00080     <span class="comment">/*  RBU Packet 0 */</span>
00081 
<a name="l00082"></a><a class="code" href="structrbu_1_1rbu__packet__0.html">00082</a>     <span class="keyword">struct  </span><a class="code" href="structrbu_1_1rbu__packet__0.html">rbu_packet_0</a>
00083     {
<a name="l00084"></a><a class="code" href="structrbu_1_1rbu__packet__0.html#o0">00084</a>         <a class="code" href="structrbu_1_1rbu__packet.html">rbu_packet</a>  <a class="code" href="structrbu_1_1rbu__packet__0.html#o0">header</a>;
<a name="l00085"></a><a class="code" href="structrbu_1_1rbu__packet__0.html#o1">00085</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__packet__0.html#o1">passwordCheckInfo</a>;  <span class="comment">// bit 7: passwordCheck is present   bits 0-6: reserved</span>
<a name="l00086"></a><a class="code" href="structrbu_1_1rbu__packet__0.html#o2">00086</a>         <a class="code" href="types_8h.html#a2">u32</a> <a class="code" href="structrbu_1_1rbu__packet__0.html#o2">passwordCheck</a>;      <span class="comment">// crc-32 of admin/setup password</span>
00087         <span class="comment">// the rest is reserved for future expansion.</span>
00088     }
00089     <a class="code" href="gcc_8hpp.html#a5">LIBSMBIOS_PACKED_ATTR</a>;
00090 
00091     <span class="comment">/* RBU Packet 0 Definition</span>
00092 <span class="comment"></span>
00093 <span class="comment">    Packet 0 is reserved for packet set information. Packet 0 data consists of data items -- each item consists of an info byte followed by the actual data item. If bit 0 of the info byte is 1, the actual data starting at the next byte is present. If bit 0 is 0, the data is not present.</span>
00094 <span class="comment"></span>
00095 <span class="comment">    The system flash password is currently defined as the admin or setup password.</span>
00096 <span class="comment"></span>
00097 <span class="comment">    BIOS reject the packet set when:</span>
00098 <span class="comment">    1.The packet set flash password CRC and the system flash password CRC do not match.</span>
00099 <span class="comment">    2.The packet set flash password CRC is not present but the system flash password is present.</span>
00100 <span class="comment"></span>
00101 <span class="comment">    */</span>
00102 
00103 
00104     <span class="comment">/*</span>
00105 <span class="comment">       RBU BIOS UPDATE HEADER FILE (.HDR) structure</span>
00106 <span class="comment">       */</span>
00107 
<a name="l00108"></a><a class="code" href="namespacerbu.html#a11">00108</a>     <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacerbu.html#a11">NUM_SYS_ID_IN_HDR</a> = 12;
00109 
<a name="l00110"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html">00110</a>     <span class="keyword">struct </span><a class="code" href="structrbu_1_1rbu__hdr__file__header.html">rbu_hdr_file_header</a>
00111     {
<a name="l00112"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o0">00112</a>         <span class="keywordtype">char</span> <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o0">headerId</a>[4];
<a name="l00113"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o1">00113</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o1">headerLength</a>;
<a name="l00114"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o2">00114</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o2">headerMajorVer</a>;
<a name="l00115"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o3">00115</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o3">headerMinorVer</a>;
<a name="l00116"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o4">00116</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o4">numSystems</a>;
<a name="l00117"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o5">00117</a>         <span class="keywordtype">char</span> <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o5">quickCheck</a>[40];
<a name="l00118"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o6">00118</a>         <span class="keywordtype">char</span> <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o6">biosVersion</a>[3];
<a name="l00119"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o7">00119</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o7">miscFlags</a>;
<a name="l00120"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o8">00120</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o8">biosInternalUse</a>;
<a name="l00121"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o9">00121</a>         <a class="code" href="types_8h.html#a0">u8</a>  <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o9">reserved</a>[5];
<a name="l00122"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o10">00122</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o10">compatFlags</a>;
<a name="l00123"></a><a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o11">00123</a>         <a class="code" href="types_8h.html#a1">u16</a> <a class="code" href="structrbu_1_1rbu__hdr__file__header.html#o11">systemIdList</a>[<a class="code" href="namespacerbu.html#a11">NUM_SYS_ID_IN_HDR</a>]; <span class="comment">/*</span>
00124 <span class="comment">            Contains the list of NumSystems Dell System ID and Hardware Revision</span>
00125 <span class="comment">            ID pairs for which the Image Data is valid, in the following format:</span>
00126 <span class="comment">            Bit Range  Description</span>
00127 <span class="comment">            15:11      Dell System ID, bits 12:8.</span>
00128 <span class="comment">                        This range is set to 00000b if the Dell System ID</span>
00129 <span class="comment">                        is a 1-byte value.</span>
00130 <span class="comment">            10:8       Hardware Revision ID</span>
00131 <span class="comment">            7:0        Dell System ID, bits 7:0. */</span>
00132     }
00133     <a class="code" href="gcc_8hpp.html#a5">LIBSMBIOS_PACKED_ATTR</a>;
00134 
00135 <span class="preprocessor">#   if defined(_MSC_VER)</span>
00136 <span class="preprocessor"></span><span class="preprocessor">#       pragma pack(pop)</span>
00137 <span class="preprocessor"></span><span class="preprocessor">#   endif</span>
00138 <span class="preprocessor"></span>
00139 }
00140 
00141 <span class="preprocessor">#endif </span><span class="comment">/* RBUIMPL_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Mar 26 12:27:33 2014 for libsmbios_c library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
