#
# This file is part of LFT.
#
# The LFT software provided in this Distribution is
# Copyright 2005 VOSTROM Holdings, Inc.
#
# The full text of our legal notices is contained in the file called
# COPYING, included with this Distribution.

# Directory where LFT will be installed:

prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
mandir=@mandir@
INSTALL=@INSTALL@
LN=@LN_S@

# Commands/References

CC=@CC@
CFLAGS=@CFLAGS@
LIBS=@LIBS@
LDFLAGS=@LDFLAGS@

CAT=cat
CD=cd
MKDIR=mkdir -p
BUILDTYPE=build
RM=rm -rf
SH=sh
SYSTEM=unix
TOOLS=tools
TOUCH=touch
@SET_MAKE@

# Specifics

OBJS=lft.o lft_ifname.o whois.o

all: lft whob

lft: $(OBJS)
	$(CC) -o lft $(OBJS) $(LDFLAGS) $(LIBS) -lm

whob: whois.o
	$(CC) -o whob whois.c -DSTANDALONE $(LDFLAGS) $(LIBS) -lm

install: lft lft.8 whob whob.8
	@echo "Installing LFT and WhoB"
	test -d $(bindir)/. || $(MKDIR) $(bindir)
	$(INSTALL) lft $(bindir)/lft
	$(INSTALL) whob $(bindir)/whob
	@ ( echo chown root $(bindir)/lft && chown root $(bindir)/lft && echo chmod u+s $(bindir)/lft && chmod u+s $(bindir)/lft ) || echo "***" WARNING: could not set $(bindir) suid to root
	test -d $(mandir)/man8/. || $(MKDIR) $(mandir)/man8
	@echo "Installing LFT and WhoB manual pages"
	$(INSTALL) lft.8 $(mandir)/man8/lft.8
	$(INSTALL) whob.8 $(mandir)/man8/whob.8

clean:
	$(RM) *.o core* lft whob *~

distclean:
	$(RM) Makefile acconfig.h config.log config.status

better:
	@echo "Sorry, this is the best I can do."

work:
	@echo "Sorry, I didn't write this.  I'm only a Makefile."

love:
	@echo "What do you think I was doing before you bothered me?"

