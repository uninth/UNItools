
# Makefile.in for PCRE (Perl-Compatible Regular Expression) library.


# Edited substantially by fyodor@insecure.org to remove libtool dependency
# and strip it to just building the library.

#############################################################################

# PCRE is developed on a Unix system. I do not use Windows or Macs, and know
# nothing about building software on them. Although the code of PCRE should
# be very portable, the building system in this Makefile is designed for Unix
# systems. However, there are features that have been supplied to me by various
# people that should make it work on MinGW and Cygwin systems.

# This setting enables Unix-style directory scanning in pcregrep, triggered
# by the -f option. Maybe one day someone will add code for other systems.

PCREGREP_OSTYPE=-DIS_UNIX

#############################################################################


# Libtool places .o files in the .libs directory; this can mean that "make"
# thinks is it not up-to-date when in fact it is. This setting helps when
# GNU "make" is being used. It presumably does no harm in other cases.

VPATH=.libs


#---------------------------------------------------------------------------#
# The following lines are modified by "configure" to insert data that it is #
# given in its arguments, or which it finds out for itself.                 #
#---------------------------------------------------------------------------#

SHELL = /bin/sh
prefix = /var/opt/UNItools
exec_prefix = ${prefix}
top_srcdir = .

mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs

# NB: top_builddir is not referred to directly below, but it is used in the
# setting of $(LIBTOOL), so don't remove it!

top_builddir = .

# BINDIR is the directory in which the pcregrep, pcretest, and pcre-config
#          commands are installed.
# INCDIR is the directory in which the public header files pcre.h and
#          pcreposix.h are installed.
# LIBDIR is the directory in which the libraries are installed.
# MANDIR is the directory in which the man pages are installed.

BINDIR = /var/opt/UNItools/bin
LIBDIR = ${exec_prefix}/lib
INCDIR = ${prefix}/include
MANDIR = /var/opt/UNItools/share/man

# EXEEXT is set by configure to the extention of an executable file
# OBJEXT is set by configure to the extention of an object file
# The BUILD_* equivalents are the same but for the host we're building on

EXEEXT = 
OBJEXT = o
# Note that these are just here to have a convenient place to look at the
# outcome.
BUILD_EXEEXT = $(EXEEXT)
BUILD_OBJEXT = $(OBJEXT)

# POSIX_OBJ and POSIX_LOBJ are either set empty, or to the names of the
# POSIX object files.

POSIX_OBJ = 
POSIX_LOBJ = 

# The compiler, C flags, preprocessor flags, etc

CC = gcc
AR = ar
RANLIB = ranlib
CXX = @CXX@
CFLAGS = -g -O2
CXXFLAGS = @CXXFLAGS@
LDFLAGS = -static

CC_FOR_BUILD = $(CC)
CFLAGS_FOR_BUILD = $(CFLAGS)
CXX_FOR_BUILD = @CXX_FOR_BUILD@
CXXFLAGS_FOR_BUILD = @CXXFLAGS_FOR_BUILD@
LDFLAGS_FOR_BUILD = $(LDFLAGS)

UCP = 
NEWLINE = 
POSIX_MALLOC_THRESHOLD = -DPOSIX_MALLOC_THRESHOLD=10
LINK_SIZE = 
MATCH_LIMIT = 
NO_RECURSE = 
EBCDIC = 

INCLS = -I. -I$(top_srcdir)
DEFS = $(NEWLINE) $(LINK_SIZE) $(MATCH_LIMIT)
TARGET=libpcre.a
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

# These are the version numbers for the shared libraries

PCRELIBVERSION = 0:1:0
PCREPOSIXLIBVERSION = 0:0:0

##############################################################################


OBJ = pcre_chartables.o \
  pcre_compile.o \
  pcre_config.o \
  pcre_dfa_exec.o \
  pcre_exec.o \
  pcre_fullinfo.o \
  pcre_get.o \
  pcre_globals.o \
  pcre_info.o \
  pcre_maketables.o \
  pcre_printint.o \
  pcre_refcount.o \
  pcre_study.o \
  pcre_tables.o \
  pcre_try_flipped.o \
  pcre_version.o \
  pcre_xclass.o \
  $(POSIX_OBJ)

all:            $(TARGET)

# Note that files generated by ./configure and by dftables are in the current
# directory, not the source directory.

pcre_chartables.o: pcre_chartables.c
		 $(CC) -c $(CFLAGS) $(INCLS) $(DEFS) \
                 $(POSIX_MALLOC_THRESHOLD) pcre_chartables.c

pcre_compile.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_compile.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_compile.c

pcre_config.o:  Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_config.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_config.c

pcre_dfa_exec.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_dfa_exec.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_dfa_exec.c

pcre_exec.o:    Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_exec.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_exec.c

pcre_fullinfo.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_fullinfo.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_fullinfo.c

pcre_get.o:     Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_get.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_get.c

pcre_globals.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_globals.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_globals.c

pcre_info.o:    Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_info.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_info.c

pcre_maketables.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_maketables.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_maketables.c

pcre_printint.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_printint.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_printint.c

pcre_refcount.o:   Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_refcount.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_refcount.c

pcre_study.o:   Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_study.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_study.c

pcre_tables.o:  Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_tables.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_tables.c

pcre_try_flipped.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_try_flipped.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_try_flipped.c

pcre_version.o: Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_version.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_version.c

pcre_xclass.o:  Makefile config.h pcre.h \
		$(top_srcdir)/pcre_internal.h $(top_srcdir)/pcre_xclass.c
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) $(POSIX_MALLOC_THRESHOLD) \
		$(top_srcdir)/pcre_xclass.c

pcreposix.o:    $(top_srcdir)/pcreposix.c $(top_srcdir)/pcreposix.h \
		  $(top_srcdir)/pcre_internal.h pcre.h config.h Makefile
		@$(LTCOMPILE) $(POSIX_MALLOC_THRESHOLD) $(top_srcdir)/pcreposix.c

$(TARGET):     $(OBJ)
		-rm -f libpcre.a
		$(AR) cr $@ $(OBJ)
		$(RANLIB) $@

# An auxiliary program makes the default character table source. This is put
# in the current directory, NOT the $top_srcdir directory.

pcre_chartables.c:   dftables$(EXEEXT)
		./dftables$(EXEEXT) pcre_chartables.c

dftables.$(OBJEXT):     $(top_srcdir)/dftables.c \
		$(top_srcdir)/pcre_maketables.c $(top_srcdir)/pcre_internal.h \
		pcre.h config.h Makefile
		$(CC) -c $(CFLAGS) $(INCLS) $(DEFS) -I. $(top_srcdir)/dftables.c

dftables$(EXEEXT):      dftables.$(OBJEXT)
	$(CC) $(CFLAGS) -o dftables dftables.o

# We deliberately omit dftables and pcre_chartables.c from 'make clean'; once
# made pcre_chartables.c shouldn't change, and if people have edited the tables
# by hand, you don't want to throw them away.

clean:;         -rm -rf *.o *.lo *.a *.la .libs pcretest pcre_stringpiece_unittest pcrecpp_unittest pcre_scanner_unittest pcregrep testtry

# But "make distclean" should get back to a virgin distribution

distclean:      clean
		-rm -f pcre_chartables.c libtool pcre-config libpcre.pc \
		pcre.h pcre_stringpiece.h pcrecpp.h \
		dftables RunGrepTest RunTest \
		Makefile config.h config.status config.log config.cache

# End
