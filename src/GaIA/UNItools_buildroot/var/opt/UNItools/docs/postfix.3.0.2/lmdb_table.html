Content-type: text/html

<HTML><HEAD><TITLE>Manpage of LMDB_TABLE</TITLE>
</HEAD><BODY>
<H1>LMDB_TABLE</H1>
Section: File Formats (5)<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>



<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

lmdb_table
-
Postfix LMDB adapter
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>


<PRE>
<B>postmap lmdb:/etc/postfix/</B><I>filename</I>
<BR>
<B>postmap -i lmdb:/etc/postfix/</B><I>filename</I><B> &lt;</B><I>inputfile</I>

<B>postmap -d &quot;</B><I>key</I><B>&quot; lmdb:/etc/postfix/</B><I>filename</I>
<BR>
<B>postmap -d - lmdb:/etc/postfix/</B><I>filename</I><B> &lt;</B><I>inputfile</I>

<B>postmap -q &quot;</B><I>key</I><B>&quot; lmdb:/etc/postfix/</B><I>filename</I>
<BR>
<B>postmap -q - lmdb:/etc/postfix/</B><I>filename</I><B> &lt;</B><I>inputfile</I>
</PRE><A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>



The Postfix LMDB adapter provides access to a persistent,
memory-mapped, key-value store.  The database size is limited
only by the size of the memory address space (typically 31
or 47 bits on 32-bit or 64-bit CPUs, respectively) and by
the available file system space.
<A NAME="lbAE">&nbsp;</A>
<H2>REQUESTS</H2>


<PRE>
</PRE>

The LMDB adapter supports all Postfix lookup table operations.
This makes LMDB suitable for Postfix address rewriting,
routing, access policies, caches, or any information that
can be stored under a fixed lookup key.
<P>
When a transaction fails due to a full database, Postfix
resizes the database and retries the transaction.
<P>
Postfix table lookups may generate partial search keys such
as domain names without one or more subdomains, network
addresses without one or more least-significant octets, or
email addresses without the localpart, address extension
or domain portion.  This behavior is also found with, for
example, btree:, hash:, or ldap: tables.
<P>
Unlike other flat-file Postfix databases, changes to
an LMDB database do not trigger automatic daemon program
restart, and do not require &quot;<B>postfix reload</B>&quot;.
<A NAME="lbAF">&nbsp;</A>
<H2>RELIABILITY</H2>


<PRE>
</PRE>

LMDB's copy-on-write architecture provides safe updates,
at the cost of using more space than some other flat-file
databases.  Read operations are memory-mapped for speed.
Write operations are not memory-mapped to avoid silent
corruption due to stray pointer bugs.
<P>
Multiple processes can safely update an LMDB database without
serializing requests through the <A HREF="../man8/proxymap.8.html">proxymap</A>(8) service.  This
makes LMDB suitable as a shared cache for <A HREF="../man8/verify.8.html">verify</A>(8) or
<A HREF="../man8/postscreen.8.html">postscreen</A>(8) services.
<A NAME="lbAG">&nbsp;</A>
<H2>SYNCHRONIZATION</H2>


<PRE>
</PRE>

The Postfix LMDB adapter does not use LMDB's built-in locking
scheme, because that would require world-writable lockfiles
and would violate the Postfix security model.  Instead,
Postfix uses <A HREF="../man2/fcntl.2.html">fcntl</A>(2) locks with whole-file granularity.
Programs that use LMDB's built-in locking protocol will
corrupt a Postfix LMDB database or will read garbage.
<P>
Every Postfix LMDB database read or write transaction must
be protected from start to end with a shared or exclusive
<A HREF="../man2/fcntl.2.html">fcntl</A>(2) lock.  A writer may atomically downgrade an exclusive
lock to a shared lock, but it must hold an exclusive lock
while opening another write transaction.
<P>
Note that <A HREF="../man2/fcntl.2.html">fcntl</A>(2) locks do not protect transactions within
the same process against each other.  If a program cannot
avoid making simultaneous database requests, then it must
protect its transactions with in-process locks, in addition
to the per-process <A HREF="../man2/fcntl.2.html">fcntl</A>(2) locks.
<A NAME="lbAH">&nbsp;</A>
<H2>CONFIGURATION PARAMETERS</H2>


<PRE>
</PRE>

Short-lived programs automatically pick up changes to
main.cf.  With long-running daemon programs, Use the command
&quot;<B>postfix reload</B>&quot; after a configuration change.
<DL COMPACT>
<DT><B>lmdb_map_size (default: 16777216)</B><DD>
The initial LMDB database size limit in bytes.
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>


<PRE>
<A HREF="../man1/postconf.1.html">postconf</A>(1), Postfix supported lookup tables
<A HREF="../man1/postmap.1.html">postmap</A>(1), Postfix lookup table maintenance
<A HREF="../man5/postconf.5.html">postconf</A>(5), configuration parameters
</PRE><A NAME="lbAJ">&nbsp;</A>
<H2>README FILES</H2>


<PRE>
</PRE>

Use &quot;<B>postconf readme_directory</B>&quot; or
&quot;<B>postconf html_directory</B>&quot; to locate this information.

<PRE>
DATABASE_README, Postfix lookup table overview
LMDB_README, Postfix OpenLDAP LMDB howto
</PRE><A NAME="lbAK">&nbsp;</A>
<H2>LICENSE</H2>


<PRE>
</PRE>

The Secure Mailer license must be distributed with this software.
<A NAME="lbAL">&nbsp;</A>
<H2>HISTORY</H2>


<PRE>
LMDB support was introduced with Postfix version 2.11.
</PRE><A NAME="lbAM">&nbsp;</A>
<H2>AUTHOR(S)</H2>


<PRE>
Howard Chu
Symas Corporation

Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA

</PRE>
<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">REQUESTS</A><DD>
<DT><A HREF="#lbAF">RELIABILITY</A><DD>
<DT><A HREF="#lbAG">SYNCHRONIZATION</A><DD>
<DT><A HREF="#lbAH">CONFIGURATION PARAMETERS</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">README FILES</A><DD>
<DT><A HREF="#lbAK">LICENSE</A><DD>
<DT><A HREF="#lbAL">HISTORY</A><DD>
<DT><A HREF="#lbAM">AUTHOR(S)</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 12:21:52 GMT, August 25, 2016
</BODY>
</HTML>
